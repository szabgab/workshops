# GitHub Actions to generate complex static web sites


* [Meetup](https://www.meetup.com/code-mavens/events/292821156/)

## What are "GitHub Pages"?

* Create a static site from Markdown files in a branch. (Use the main branch and the `docs/` subfolder) Use [https://github.com/cm-demo](https://github.com/cm-demo) for this
    * New repository `cm-demo.github.io`  / Public / Add README
    * Settings / Pages (no need to do anything)
    * [Visit](https://cm-demo.github.io/)
    * Edit the README.md add some text (e.g. "This is the README" )

    * We can see the process in the [actions](https://github.com/cm-demo/cm-demo.github.io/actions) entry

    * Settings / Pages /
        * Source: Deploy from branch
        * Branch: main , `/docs`
    * Create `docs/index.md` file (write something like "this page is generated from docs/index.md")
    * [Visit](https://cm-demo.github.io/)

* User your own subdomain
    * Visit [https://workshops.code-maven.com/](https://workshops.code-maven.com/)
    * It's source is at [https://github.com/szabgab/workshops](https://github.com/szabgab/workshops)
    * It is in the `/docs` folder. There are some other things outside. (code generating banners for Meetup, thumbnails for the YouTube videos)
    * CNAME
    * DNS mapping at [https://iwantmyname.com/](https://iwantmyname.com/)
    * `_config.yml`  (theme etc.)
    * `_layouts`

    * Visit [https://szabgab.github.io/](https://szabgab.github.io/) (it redirects to https://github.szabgab.com/ )


* Convert it to a site generated by GitHub Actions using Static HTML
    * Settings / Pages
    * source: GitHub Actions (beta)
    * Static HTML: Configure
        * This will create a workflow YAML file in `.github/workflows`
    * Create a file called `/index.html`
    * [Visit](https://cm-demo.github.io/)

    * Remove the workflow file and the index.html as we won't need them

    * See [Perlweekly.com](https://perlweekly.com/) and its [source](https://github.com/szabgab/perlweekly) where the HTML pages are generated locally.
        * This does not even need the action we created.


* Convert it to a site generated by GitHub Actions using Jekyll
    * What is [Jekyll?](https://jekyllrb.com/) It can transform Makrdown to HTML just like [Dr. Jekyll and Mr. Hyde](https://en.wikipedia.org/wiki/Strange_Case_of_Dr_Jekyll_and_Mr_Hyde)
    * Settings / Pages
    * source: GitHub Actions (beta)
    * GitHub Pages Jekyll: Configure
        * This will create a workflow YAML file in `.github/workflows`
    * [Visit](https://cm-demo.github.io/)
    * [Visit the docs](https://cm-demo.github.io/docs)

* Change the site to be generated by our own code
    * Edit the `.github/workflows/jekyll-gh-pages.yml` file
        * rename it
        * replace the Jekyll action by the following:

        ```
              - name: Build by myself
                run: |
                  mkdir _site
                  echo "Hello from Shell" > _site/index.html
        ```
* From this point you can build anything using any programming language.

* [CPAN Digger](https://cpan-digger.perlmaven.com/)
    * It has many steps testing the code first and there are several calls to the script that generates parts of the site.

* [Ruby Digger](https://ruby-digger.code-maven.com/)
    * This one commits the collected data back to the repository.
    * This is a left over from the era when we could not yet use GitHub Actions to deploy a page.
    * I'd change it, except in the `docs/update.log` we collect historical data.

* [Forem monitor](https://forem.code-maven.com/)
    * Collects data
    * Stores raw data in the `data` folder.
    * Builds the site in the `_site` folder
    * Deploys the pages.

* [Kantoniko](https://kantoniko.com/)
    * [Kantoniko GitHub organization](https://github.com/kantoniko/)
    * The repo that builds the web site [kantoniko.github.io](https://github.com/kantoniko/kantoniko.github.io)
    * It checks out all the other repositories that contain the code and the manually edited data and then runs the code.
    * Push to any other repository triggers the build on this one. e.g. [whatsapeando](https://github.com/kantoniko/ladino-estamos-whatsapeando)

* [Open Source by Organizations](https://osdc.code-maven.com/open-source-by-organizations/)
    * [source](https://github.com/OSDC-Code-Maven/open-source-by-organizations/)
    * Manually edited data
    * Python program collecting more data and saving them in the `cache` folder generating the HTML files from them.
    * Using the GitHub Actions caching reseting it once every day to avoid downloading the same data too frequently, but to also avoid having stale data.

* [OSDC instances](https://osdc.code-maven.com/instances)
    * Each course has its own GitHub repository
    * There is a [repository with GitHub Action](https://github.com/OSDC-Code-Maven/osdc-site-generator)
    * Using the cache is problematic.

## Videos in Hebrew

* [Part 1](https://youtu.be/Z-w7C9qhBGY)
* [Part 2](https://youtu.be/5Tu9GeK84wM)

